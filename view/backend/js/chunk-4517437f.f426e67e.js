(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4517437f"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"13b6":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"widget"}},[n("div",{staticClass:"widget-header"},[e.tab?e._e():n("h2",[e._t("title")],2),e.tab?n("ul",{staticClass:"widget-tabs"},e._l(e.tabTitles,(function(t,r){return n("li",{key:r,class:{active:r==e.currentTabIndex},on:{click:function(t){return e.toggleTab(r)}}},[e._v(" "+e._s(t)+" ")])})),0):e._e(),e.search?n("div",{staticClass:"widget-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchContent,expression:"searchContent"}],attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:e.searchContent},on:{input:function(t){t.target.composing||(e.searchContent=t.target.value)}}}),n("span",{on:{click:e.searchSubmit}},[n("i",{staticClass:"fa fa-search"})])]):e._e(),n("div",{staticClass:"widget-ctrls"},[e._t("button")],2)]),n("div",{staticClass:"widget-body"},[e._t("body")],2),e.footer?n("div",{staticClass:"widget-footer"}):e._e()])},a=[],i={name:"Panel",data:function(){return{searchContent:"",currentTabIndex:0}},props:{tab:{type:Boolean,default:!1},tabTitles:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1},footer:{type:Boolean,default:!1}},methods:{toggleTab:function(e){this.currentTabIndex=e,this.$emit("tabClicked",this.currentTabIndex)},searchSubmit:function(){this.$emit("searchClicked",this.searchContent)}}},o=i,s=(n("302b"),n("2877")),c=Object(s["a"])(o,r,a,!1,null,"7b3f540d",null);t["a"]=c.exports},"1dde":function(e,t,n){var r=n("d039"),a=n("b622"),i=n("60ae"),o=a("species");e.exports=function(e){return i>=51||!r((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"302b":function(e,t,n){"use strict";var r=n("59f6"),a=n.n(r);a.a},"3ceb":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("314e");function a(e){var t={};return e.email&&(t.email=e.email),e.nickname&&(t.nickname=e.nickname),Object(r["a"])({url:"api/users",method:"get",params:t})}},"44ae":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"admins-detail"}},[n("input",{staticStyle:{position:"absolute",top:"-10000px"},attrs:{type:"text"}}),n("input",{staticStyle:{position:"absolute",top:"-10000px"},attrs:{type:"password"}}),n("panel",[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("基本信息")]),n("button",{attrs:{slot:"button"},on:{click:e.add},slot:"button"},[n("i",{staticClass:"fa fa-save"}),e._v("保存设置")]),n("el-form",{ref:"adminInfoForm",attrs:{slot:"body",model:e.adminInfo,rules:e.rules,"label-width":"100px"},slot:"body"},[n("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[n("el-input",{model:{value:e.adminInfo.email,callback:function(t){e.$set(e.adminInfo,"email",t)},expression:"adminInfo.email"}})],1),n("el-form-item",{attrs:{label:"管理员昵称",prop:"nickname"}},[n("el-input",{model:{value:e.adminInfo.nickname,callback:function(t){e.$set(e.adminInfo,"nickname",t)},expression:"adminInfo.nickname"}})],1),n("el-form-item",{attrs:{label:"管理员密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:e.adminInfo.password,callback:function(t){e.$set(e.adminInfo,"password",t)},expression:"adminInfo.password"}})],1),n("el-form-item",{attrs:{label:"确认密码",prop:"confirm"}},[n("el-input",{attrs:{type:"password"},model:{value:e.adminInfo.confirm,callback:function(t){e.$set(e.adminInfo,"confirm",t)},expression:"adminInfo.confirm"}})],1),n("el-form-item",{attrs:{label:"管理员角色",prop:"role",error:e.rolesError?"角色列表读取失败":""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色"},model:{value:e.adminInfo.role,callback:function(t){e.$set(e.adminInfo,"role",t)},expression:"adminInfo.role"}},e._l(e.roles,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1)],1)],1)],1)},a=[],i=(n("4de4"),n("c975"),n("13b6")),o=n("3ceb"),s=n("532c"),c=n("7d46"),l={name:"AdminsCreate",data:function(){var e=this;return{adminInfo:{email:"",nickname:"",password:"",confirm:"",role:""},rules:{email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{pattern:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,message:"请填写正确的邮箱地址",trigger:"blur"},{validator:function(t,n,r){Object(o["a"])({email:n}).then((function(e){""==e.data?r():r(new Error("邮箱被占用！"))})).catch((function(t){e.$message.error(t.message)}))},trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{validator:function(t,n,r){Object(o["a"])({nickname:n}).then((function(e){""==e.data?r():r(new Error("昵称被占用！"))})).catch((function(t){e.$message.error(t.message)}))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码不得小于6位",trigger:"blur"},{validator:function(t,n,r){""!==e.adminInfo.confirm&&e.$refs.adminInfoForm.validateField("confirm"),r()},trigger:"blur"}],confirm:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(t,n,r){n!==e.adminInfo.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],role:[{required:!0,message:"请为管理员分配角色",trigger:["blur","change"]}]},roles:[],rolesError:!1}},created:function(){this.getRoles()},methods:{getRoles:function(){var e=this;Object(s["d"])().then((function(t){e.roles=t.data.filter((function(e){return-1==e.authorities.indexOf(1e5)}))})).catch((function(t){e.rolesError=!0,e.$message.error(t.message)}))},add:function(){var e=this;this.$refs.adminInfoForm.validate((function(t){t&&(delete e.adminInfo.confirm,Object(c["a"])(e.adminInfo).then((function(t){e.$message.success("新增管理员成功"),e.$router.push({name:"admin-list"})})).catch((function(t){e.$message.error(t.message)})))}))}},components:{Panel:i["a"]}},u=l,d=n("2877"),f=Object(d["a"])(u,r,a,!1,null,null,null);t["default"]=f.exports},"4de4":function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").filter,i=n("1dde");r({target:"Array",proto:!0,forced:!i("filter")},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"532c":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));n("ac1f"),n("841c");var r=n("314e");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/api/roles";return e.id&&(t="/api/roles/"+e.id),Object(r["a"])({url:t,method:"get",params:{search:e.search}})}function i(e){return Object(r["a"])({url:"/api/roles",method:"post",data:e})}function o(e,t){return Object(r["a"])({url:"/api/roles/"+e,method:"put",data:t})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/api/roles";return e.id&&(t="/api/roles/"+e.id),Object(r["a"])({url:t,method:"delete",params:{_ids:e._ids}})}function c(){return Object(r["a"])({url:"/api/authorities",method:"get"})}},"59f6":function(e,t,n){},"7d46":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s}));n("ac1f"),n("841c");var r=n("314e");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};e.search&&(t.search=e.search);var n="/api/admins";return e.id&&(n+="/"+e.id),Object(r["a"])({url:n,method:"get",params:t})}function i(e){return Object(r["a"])({url:"/api/admins",method:"post",data:e})}function o(e,t){return Object(r["a"])({url:"/api/admins/"+e,method:"put",data:t})}function s(e){var t="/api/admins",n={};return e.id&&(t+="/"+e.id),e.ids&&(n._ids=e.ids),Object(r["a"])({url:t,method:"delete",params:n})}},"841c":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),i=n("1d80"),o=n("129f"),s=n("14c3");r("search",1,(function(e,t,n){return[function(t){var n=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var i=a(e),c=String(this),l=i.lastIndex;o(l,0)||(i.lastIndex=0);var u=s(i,c);return o(i.lastIndex,l)||(i.lastIndex=l),null===u?-1:u.index}]}))},c975:function(e,t,n){"use strict";var r=n("23e7"),a=n("4d64").indexOf,i=n("b301"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,c=i("indexOf");r({target:"Array",proto:!0,forced:s||c},{indexOf:function(e){return s?o.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-4517437f.f426e67e.js.map