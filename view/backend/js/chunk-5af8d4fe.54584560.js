(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5af8d4fe"],{"06fe":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"roles-detail"}},[r("panel",{attrs:{tab:"","tab-titles":["基本信息","权限设置"]},on:{tabClicked:t.tTab}},[r("button",{attrs:{slot:"button",disabled:t.disabled},on:{click:t.save},slot:"button"},[r("i",{staticClass:"fa fa-save"}),t._v("保存设置")]),r("el-form",{ref:"roleInfoForm",attrs:{slot:"body",model:t.roleInfo,rules:t.rules,"label-width":"100px"},slot:"body"},[r("div",{directives:[{name:"show",rawName:"v-show",value:0==t.currentTab,expression:"currentTab==0"}]},[r("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[r("el-input",{on:{input:t.formInput},model:{value:t.roleInfo.name,callback:function(e){t.$set(t.roleInfo,"name",e)},expression:"roleInfo.name"}})],1),r("el-form-item",{attrs:{label:"角色说明",prop:"description"}},[r("el-input",{model:{value:t.roleInfo.description,callback:function(e){t.$set(t.roleInfo,"description",e)},expression:"roleInfo.description"}})],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1==t.currentTab,expression:"currentTab==1"}]},t._l(t.authList,(function(e,n){return r("el-form-item",{key:n,attrs:{label:e.description}},[r("el-radio-group",{model:{value:e.select,callback:function(r){t.$set(e,"select",r)},expression:"item.select"}},[r("el-radio",{attrs:{label:0,border:""}},[t._v("无权限")]),r("el-radio",{attrs:{label:1,border:""}},[t._v("仅查看"+t._s(e.authorities[0].code))]),r("el-radio",{attrs:{label:2,border:""}},[t._v("查看和编辑"+t._s(e.authorities[1].code))])],1)],1)})),1)])],1)],1)},a=[],o=(r("4de4"),r("4160"),r("d81d"),r("b0c0"),r("159b"),r("13b6")),i=r("532c"),s={name:"RolesCreate",data:function(){return{authList:[],roleInfo:{name:"",description:"",authorities:[]},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},currentTab:0,disabled:!0}},created:function(){this.getAuthorities()},methods:{getAuthorities:function(){var t=this;Object(i["c"])().then((function(e){t.authList=e.data.filter((function(t){return 1e5!=t.code})).map((function(t){return t.select=0,t}))})).catch((function(e){t.$message.error(e.message)}))},save:function(){var t=this;this.disabled=!0,this.roleInfo.authorities=[],this.authList.forEach((function(e){switch(e.select){case 0:break;case 1:e.authorities.forEach((function(e){"read"==e.name&&t.roleInfo.authorities.push(e.code)}));break;case 2:e.authorities.forEach((function(e){"read"==e.name&&t.roleInfo.authorities.push(e.code),"edit"==e.name&&t.roleInfo.authorities.push(e.code)}));break}})),Object(i["a"])(this.roleInfo).then((function(e){t.$message.success("添加成功"),t.$router.push({name:"role-list"})})).catch((function(e){t.$message.error(e.message)}))},tTab:function(t){this.currentTab=t},formInput:function(){var t=this;this.$refs.roleInfoForm.validate((function(e){return t.disabled=!e}))}},components:{Panel:o["a"]}},c=s,u=(r("45aa"),r("2877")),l=Object(u["a"])(c,n,a,!1,null,null,null);e["default"]=l.exports},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"13b6":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"widget"}},[r("div",{staticClass:"widget-header"},[t.tab?t._e():r("h2",[t._t("title")],2),t.tab?r("ul",{staticClass:"widget-tabs"},t._l(t.tabTitles,(function(e,n){return r("li",{key:n,class:{active:n==t.currentTabIndex},on:{click:function(e){return t.toggleTab(n)}}},[t._v(" "+t._s(e)+" ")])})),0):t._e(),t.search?r("div",{staticClass:"widget-search"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchContent,expression:"searchContent"}],attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:t.searchContent},on:{input:function(e){e.target.composing||(t.searchContent=e.target.value)}}}),r("span",{on:{click:t.searchSubmit}},[r("i",{staticClass:"fa fa-search"})])]):t._e(),r("div",{staticClass:"widget-ctrls"},[t._t("button")],2)]),r("div",{staticClass:"widget-body"},[t._t("body")],2),t.footer?r("div",{staticClass:"widget-footer"}):t._e()])},a=[],o={name:"Panel",data:function(){return{searchContent:"",currentTabIndex:0}},props:{tab:{type:Boolean,default:!1},tabTitles:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1},footer:{type:Boolean,default:!1}},methods:{toggleTab:function(t){this.currentTabIndex=t,this.$emit("tabClicked",this.currentTabIndex)},searchSubmit:function(){this.$emit("searchClicked",this.searchContent)}}},i=o,s=(r("302b"),r("2877")),c=Object(s["a"])(i,n,a,!1,null,"7b3f540d",null);e["a"]=c.exports},"1dde":function(t,e,r){var n=r("d039"),a=r("b622"),o=r("60ae"),i=a("species");t.exports=function(t){return o>=51||!n((function(){var e=[],r=e.constructor={};return r[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"302b":function(t,e,r){"use strict";var n=r("59f6"),a=r.n(n);a.a},"3aca":function(t,e,r){},"45aa":function(t,e,r){"use strict";var n=r("3aca"),a=r.n(n);a.a},"4de4":function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").filter,o=r("1dde");n({target:"Array",proto:!0,forced:!o("filter")},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"532c":function(t,e,r){"use strict";r.d(e,"d",(function(){return a})),r.d(e,"a",(function(){return o})),r.d(e,"e",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return c}));r("ac1f"),r("841c");var n=r("314e");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="/api/roles";return t.id&&(e="/api/roles/"+t.id),Object(n["a"])({url:e,method:"get",params:{search:t.search}})}function o(t){return Object(n["a"])({url:"/api/roles",method:"post",data:t})}function i(t,e){return Object(n["a"])({url:"/api/roles/"+t,method:"put",data:e})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="/api/roles";return t.id&&(e="/api/roles/"+t.id),Object(n["a"])({url:e,method:"delete",params:{_ids:t._ids}})}function c(){return Object(n["a"])({url:"/api/authorities",method:"get"})}},"59f6":function(t,e,r){},"841c":function(t,e,r){"use strict";var n=r("d784"),a=r("825a"),o=r("1d80"),i=r("129f"),s=r("14c3");n("search",1,(function(t,e,r){return[function(e){var r=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var o=a(t),c=String(this),u=o.lastIndex;i(u,0)||(o.lastIndex=0);var l=s(o,c);return i(o.lastIndex,u)||(o.lastIndex=u),null===l?-1:l.index}]}))},d81d:function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").map,o=r("1dde");n({target:"Array",proto:!0,forced:!o("map")},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-5af8d4fe.54584560.js.map