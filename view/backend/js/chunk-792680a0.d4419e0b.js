(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-792680a0"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"13b6":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"widget"}},[n("div",{staticClass:"widget-header"},[t.tab?t._e():n("h2",[t._t("title")],2),t.tab?n("ul",{staticClass:"widget-tabs"},t._l(t.tabTitles,(function(e,r){return n("li",{key:r,class:{active:r==t.currentTabIndex},on:{click:function(e){return t.toggleTab(r)}}},[t._v(" "+t._s(e)+" ")])})),0):t._e(),t.search?n("div",{staticClass:"widget-search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchContent,expression:"searchContent"}],attrs:{type:"text",placeholder:"请输入搜索内容"},domProps:{value:t.searchContent},on:{input:function(e){e.target.composing||(t.searchContent=e.target.value)}}}),n("span",{on:{click:t.searchSubmit}},[n("i",{staticClass:"fa fa-search"})])]):t._e(),n("div",{staticClass:"widget-ctrls"},[t._t("button")],2)]),n("div",{staticClass:"widget-body"},[t._t("body")],2),t.footer?n("div",{staticClass:"widget-footer"}):t._e()])},a=[],i={name:"Panel",data:function(){return{searchContent:"",currentTabIndex:0}},props:{tab:{type:Boolean,default:!1},tabTitles:{type:Array,default:function(){return[]}},search:{type:Boolean,default:!1},footer:{type:Boolean,default:!1}},methods:{toggleTab:function(t){this.currentTabIndex=t,this.$emit("tabClicked",this.currentTabIndex)},searchSubmit:function(){this.$emit("searchClicked",this.searchContent)}}},o=i,s=(n("302b"),n("2877")),c=Object(s["a"])(o,r,a,!1,null,"7b3f540d",null);e["a"]=c.exports},"1dde":function(t,e,n){var r=n("d039"),a=n("b622"),i=n("60ae"),o=a("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[o]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"302b":function(t,e,n){"use strict";var r=n("59f6"),a=n.n(r);a.a},"3ceb":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("314e");function a(t){var e={};return t.email&&(e.email=t.email),t.nickname&&(e.nickname=t.nickname),Object(r["a"])({url:"api/users",method:"get",params:e})}},"498a":function(t,e,n){"use strict";var r=n("23e7"),a=n("58a8").trim,i=n("e070");r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},"4de4":function(t,e,n){"use strict";var r=n("23e7"),a=n("b727").filter,i=n("1dde");r({target:"Array",proto:!0,forced:!i("filter")},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},"532c":function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return c}));n("ac1f"),n("841c");var r=n("314e");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="/api/roles";return t.id&&(e="/api/roles/"+t.id),Object(r["a"])({url:e,method:"get",params:{search:t.search}})}function i(t){return Object(r["a"])({url:"/api/roles",method:"post",data:t})}function o(t,e){return Object(r["a"])({url:"/api/roles/"+t,method:"put",data:e})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="/api/roles";return t.id&&(e="/api/roles/"+t.id),Object(r["a"])({url:e,method:"delete",params:{_ids:t._ids}})}function c(){return Object(r["a"])({url:"/api/authorities",method:"get"})}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),a=n("5899"),i="["+a+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},"59f6":function(t,e,n){},"60f0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"admins-detail"}},[n("input",{staticStyle:{position:"absolute",top:"-10000px"},attrs:{type:"text"}}),n("input",{staticStyle:{position:"absolute",top:"-10000px"},attrs:{type:"password"}}),n("panel",[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("基本信息")]),n("button",{attrs:{slot:"button"},on:{click:t.edit},slot:"button"},[n("i",{staticClass:"fa fa-save"}),t._v("保存设置")]),n("el-form",{ref:"adminInfoForm",attrs:{slot:"body",model:t.adminInfo,rules:t.rules,"label-width":"100px"},slot:"body"},[n("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[n("el-input",{model:{value:t.adminInfo.email,callback:function(e){t.$set(t.adminInfo,"email",e)},expression:"adminInfo.email"}})],1),n("el-form-item",{attrs:{label:"管理员昵称",prop:"nickname"}},[n("el-input",{model:{value:t.adminInfo.nickname,callback:function(e){t.$set(t.adminInfo,"nickname",e)},expression:"adminInfo.nickname"}})],1),n("el-form-item",{attrs:{label:"新密码",prop:"password"}},[n("el-input",{attrs:{type:"password"},model:{value:t.adminInfo.password,callback:function(e){t.$set(t.adminInfo,"password",e)},expression:"adminInfo.password"}})],1),n("el-form-item",{attrs:{label:"确认密码",prop:"confirm"}},[n("el-input",{attrs:{type:"password"},model:{value:t.adminInfo.confirm,callback:function(e){t.$set(t.adminInfo,"confirm",e)},expression:"adminInfo.confirm"}})],1),n("el-form-item",{attrs:{label:"管理员角色",prop:"role",error:t.rolesError?"角色列表读取失败":""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择角色"},model:{value:t.adminInfo.role,callback:function(e){t.$set(t.adminInfo,"role",e)},expression:"adminInfo.role"}},t._l(t.roles,(function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t._id}})})),1)],1)],1)],1)],1)},a=[],i=(n("4de4"),n("c975"),n("498a"),n("13b6")),o=n("3ceb"),s=n("532c"),c=n("7d46"),u={name:"AdminsUpdate",data:function(){var t=this;return{adminInfo:{email:"",nickname:"",password:"",confirm:"",role:""},oldEmail:"",oldNickname:"",rules:{email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{pattern:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,message:"请填写正确的邮箱地址",trigger:"blur"},{validator:function(e,n,r){Object(o["a"])({email:n}).then((function(e){if(n==t.oldEmail)return r();""==e.data?r():r(new Error("邮箱被占用！"))})).catch((function(e){t.$message.error(e.message)}))},trigger:"blur"}],nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{validator:function(e,n,r){if(n==t.oldNickname)return r();Object(o["a"])({nickname:n}).then((function(t){""==t.data?r():r(new Error("昵称被占用！"))})).catch((function(e){t.$message.error(e.message)}))},trigger:"blur"}],password:[{min:6,message:"密码不得小于6位",trigger:"blur"},{validator:function(e,n,r){""!==n&&t.$refs.adminInfoForm.validateField("confirm"),r()},trigger:"blur"}],confirm:[{validator:function(e,n,r){n!==t.adminInfo.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],role:[{required:!0,message:"请为管理员分配角色",trigger:["blur","change"]}]},roles:[],rolesError:!1}},created:function(){this.getRoles(),this.get(this.$route.params.id)},methods:{getRoles:function(){var t=this;Object(s["d"])().then((function(e){t.roles=e.data.filter((function(t){return-1==t.authorities.indexOf(1e5)}))})).catch((function(e){t.rolesError=!0,t.$message.error(e.message)}))},get:function(t){var e=this;Object(c["c"])({id:t}).then((function(t){e.adminInfo.email=t.data.email,e.adminInfo.nickname=t.data.nickname,t.data.role&&(e.adminInfo.role=t.data.role._id),e.oldEmail=t.data.email,e.oldNickname=t.data.nickname})).catch((function(t){e.$message.error(t.message)}))},edit:function(){var t=this;this.$refs.adminInfoForm.validate((function(e){e&&(delete t.adminInfo.confirm,0==t.adminInfo.password.trim().length&&delete t.adminInfo.password,Object(c["d"])(t.$route.params.id,t.adminInfo).then((function(e){t.$message.success("修改管理员信息成功"),t.$router.push({name:"admin-list"})})).catch((function(e){t.$message.error(e.message)})))}))}},components:{Panel:i["a"]}},l=u,d=n("2877"),f=Object(d["a"])(l,r,a,!1,null,null,null);e["default"]=f.exports},"7d46":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return s}));n("ac1f"),n("841c");var r=n("314e");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};t.search&&(e.search=t.search);var n="/api/admins";return t.id&&(n+="/"+t.id),Object(r["a"])({url:n,method:"get",params:e})}function i(t){return Object(r["a"])({url:"/api/admins",method:"post",data:t})}function o(t,e){return Object(r["a"])({url:"/api/admins/"+t,method:"put",data:e})}function s(t){var e="/api/admins",n={};return t.id&&(e+="/"+t.id),t.ids&&(n._ids=t.ids),Object(r["a"])({url:e,method:"delete",params:n})}},"841c":function(t,e,n){"use strict";var r=n("d784"),a=n("825a"),i=n("1d80"),o=n("129f"),s=n("14c3");r("search",1,(function(t,e,n){return[function(e){var n=i(this),r=void 0==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=a(t),c=String(this),u=i.lastIndex;o(u,0)||(i.lastIndex=0);var l=s(i,c);return o(i.lastIndex,u)||(i.lastIndex=u),null===l?-1:l.index}]}))},c975:function(t,e,n){"use strict";var r=n("23e7"),a=n("4d64").indexOf,i=n("b301"),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0,c=i("indexOf");r({target:"Array",proto:!0,forced:s||c},{indexOf:function(t){return s?o.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},e070:function(t,e,n){var r=n("d039"),a=n("5899"),i="​᠎";t.exports=function(t){return r((function(){return!!a[t]()||i[t]()!=i||a[t].name!==t}))}}}]);
//# sourceMappingURL=chunk-792680a0.d4419e0b.js.map